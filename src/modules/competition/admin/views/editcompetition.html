<md-toolbar class="md-theme-light">
    <h1 class="md-toolbar-tools md-whiteframe-z1">
        Redigera: {{vm.Competition.Name}}
    </h1>
</md-toolbar>

<form name="editCompetition" ng-submit="vm.SaveCompetition()">
    <div class="edit-container">
        <md-input-container md-no-float>
            <input type="text" ng-model="vm.Competition.Name" placeholder="Namn" required name="name" />
            <div ng-messages="editCompetition.name.$error">
                <div ng-message="required">Du måste fylla i ett namn på tävlingen</div>
            </div>
        </md-input-container>

        <md-input-container md-no-float>
            <input type="text" ng-model="vm.Competition.Description" placeholder="Beskrivning" />
        </md-input-container>

        <md-input-container md-no-float>
            <input type="text" ng-model="vm.Competition.Location" placeholder="Plats" g-places-autocomplete force-selection="true" />
        </md-input-container>

        <div class="full-width edit-item">
            <span>Start datum</span>
            <md-datepicker ng-model="vm.Competition.StartDate" md-placeholder="StartDatum" name="startDate"></md-datepicker>
        </div>

        <div class="full-width edit-item">
            <span>Slut datum</span>
            <md-datepicker ng-model="vm.Competition.EndDate" md-placeholder="Slutdatum"></md-datepicker>
        </div>

        <div class="full-width edit-item">
            <span>Första anmälningsdagen</span>
            <md-datepicker ng-model="vm.Competition.StartSignupDate" md-placeholder="Första anmälningsdagen"></md-datepicker>
        </div>

        <div class="full-width edit-item">
            <span>Sista anmälningsdagen</span>
            <md-datepicker ng-model="vm.Competition.EndSignupDate" md-placeholder="Sista anmälningsdagen"></md-datepicker>
        </div>
    </div>

    <div class="edit-container">

        <div class="full-width">
            <md-checkbox ng-model="vm.Competition.IsExternal" aria-label="Skapa anmälningsformulär">
                Skapa anmälningsformulär
                <md-tooltip>Ett anmälningsformulär kommer att skapas för denna tävlingen.</md-tooltip>
            </md-checkbox>
            <span ng-show="vm.Competition.IsExternal">
                <a href="external.html#/show/competition/{{$root.UserService.User.Club.ShortName}}/{{vm.Competition.Name}}" target="_blank">
                    Länk till tävlingen
                </a>
            </span>
        </div>

        <div class="full-width">
            <md-checkbox ng-model="vm.Competition.IsGlobal" aria-label="Öppen för andra klubbar i systemet">
                Öppen för andra klubbar i systemet
                <md-tooltip>Tävlingen kommer att synas under "Tävlingar" hos andra klubbar i systemet.</md-tooltip>
            </md-checkbox>
        </div>

        <div class="full-width">
            <md-checkbox ng-model="vm.Competition.IsClubCompetition" aria-label="Klubbtävling">
                Klubbtävling
                <md-tooltip>Detta är en klubbtävling, det betyder att anmälningsformuläret är låst till bara klubben.</md-tooltip>
            </md-checkbox>
        </div>
    </div>

    <md-list ng-cloak>
        <md-subheader class="md-no-sticky">
            Kategorier
        </md-subheader>

        <md-input-container md-no-float class="new-competition-category">
            <input type="text" ng-model="vm.NewCategoryName" placeholder="Ny kategori namn" />
        </md-input-container>
        <md-button ng-disabled="vm.CompetitionId <= 0" class="md-button md-raised" ng-click="vm.AddCategory();"><i class="fa fa-plus-circle"></i> Lägg till kategori</md-button>
        <i class="fa fa-question-circle">
            <md-tooltip>
                Ex: P13, P17, Herr, F13 etc...
            </md-tooltip>
        </i>

        <md-list-item ng-repeat="category in vm.Competition.Categories">
            <p>
                <i class="fa fa-trash" ng-click="vm.DeleteCategory(category);"></i>
                {{category.Name}}
            </p>
        </md-list-item>
    </md-list>

    <md-list>
        <md-subheader class="md-no-sticky">
            Deltagare
        </md-subheader>

        <md-list-item ng-repeat="compeditor in vm.Competition.Compeditors">
            <img class="md-avatar" src="{{compeditor.Image}}" fallback-src="content/images/No_Image_Available.png" />
            <p>{{compeditor.FirstName}} {{compeditor.LastName}}</p>
            <p>{{compeditor.ClubName}}</p>
            <p>{{compeditor.Category.Name}}</p>
            <div class="more-icons md-secondary">
                <i ng-if="$root.HasAccess(5, 40);" ng-click="vm.RemoveCompeditor(compeditor); $event.stopPropagation();" class="fa fa-trash md-hue-3">
                    <md-tooltip>
                        Ta bort deltagare
                    </md-tooltip>
                </i>
            </div>
        </md-list-item>
    </md-list>

    <div>
        <md-button class="md-raised md-primary" type="submit">Spara</md-button>
        <md-button class="md-raised md-warn" ng-click="vm.Back();">Avbryt</md-button>
    </div>
</form>